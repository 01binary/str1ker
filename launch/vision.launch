<launch>
  <!-- PrimeSense Carmine 1.09 launch.
       OpenNI2 is recommended on ROS Noetic. -->
  <arg
    name="use_openni2"
    default="true"
    doc="true: openni2_launch (recommended), false: legacy openni_camera"
  />
  <arg name="camera" default="carmine" />
  <arg name="device_id" default="#1" />
  <arg name="depth_registration" default="false" />
  <arg name="color_depth_synchronization" default="false" />
  <arg name="publish_tf" default="true" />

  <!-- Recommended path: OpenNI2 -->
  <include if="$(arg use_openni2)" file="$(find openni2_launch)/launch/openni2.launch">
    <arg name="camera" value="$(arg camera)" />
    <arg name="device_id" value="$(arg device_id)" />
    <arg name="depth_registration" value="$(arg depth_registration)" />
    <arg name="color_depth_synchronization" value="$(arg color_depth_synchronization)" />
    <arg name="publish_tf" value="$(arg publish_tf)" />
  </include>

  <!-- Legacy fallback: OpenNI -->
  <group unless="$(arg use_openni2)" ns="$(arg camera)">
    <node
      name="openni_node"
      pkg="openni_camera"
      type="openni_node"
      output="screen"
      required="true"
    >
      <param name="device_id" value="$(arg device_id)" />
      <param name="depth_registration" value="$(arg depth_registration)" />
      <param name="color_depth_synchronization" value="$(arg color_depth_synchronization)" />
    </node>
  </group>
</launch>
